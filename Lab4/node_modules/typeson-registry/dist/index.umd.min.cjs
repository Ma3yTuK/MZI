!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TypesonNamespace={})}(this,(function(e){"use strict";function _arrayLikeToArray$1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function asyncGeneratorStep(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,n,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,n,o,_next,_throw,"throw",e)}_next(void 0)}))}}function _createClass$1(e,t,r){return t&&function _defineProperties$1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey$1(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty$1(e,t,r){return(t=_toPropertyKey$1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ownKeys$1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _regeneratorRuntime(){_regeneratorRuntime=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function define(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,r){return e[t]=r}}function wrap(e,t,r,n){var a=t&&t.prototype instanceof Generator?t:Generator,i=Object.create(a.prototype),c=new Context(n||[]);return o(i,"_invoke",{value:makeInvokeMethod(e,r,c)}),i}function tryCatch(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=wrap;var s="suspendedStart",f="suspendedYield",l="executing",y="completed",p={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var v={};define(v,i,(function(){return this}));var d=Object.getPrototypeOf,h=d&&d(d(values([])));h&&h!==r&&n.call(h,i)&&(v=h);var m=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(v);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(r,o,a,i){var c=tryCatch(e[r],e,o);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==typeof s&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){invoke("next",e,a,i)}),(function(e){invoke("throw",e,a,i)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return invoke("throw",e,a,i)}))}i(c.arg)}var r;o(this,"_invoke",{value:function(e,n){function callInvokeWithMethodAndArg(){return new t((function(t,r){invoke(e,n,t,r)}))}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,n){var o=s;return function(a,i){if(o===l)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===p)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===s)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=l;var v=tryCatch(t,r,n);if("normal"===v.type){if(o=n.done?y:f,v.arg===p)continue;return{value:v.arg,done:n.done}}"throw"===v.type&&(o=y,n.method="throw",n.arg=v.arg)}}}function maybeInvokeDelegate(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var a=tryCatch(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,p;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function next(){for(;++o<t.length;)if(n.call(t,o))return next.value=t[o],next.done=!1,next;return next.value=e,next.done=!0,next};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(m,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e},t.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new AsyncIterator(wrap(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},defineIteratorMethods(m),define(m,u,"Generator"),define(m,i,(function(){return this})),define(m,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function next(){for(;r.length;){var e=r.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function handle(n,o){return i.type="throw",i.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return handle("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0);if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:values(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),p}},t}function _slicedToArray$1(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t);else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||_unsupportedIterableToArray$1(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray$1(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray$1(e)}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray$1(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toPropertyKey$1(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function _typeof$1(e){return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(e)}function _unsupportedIterableToArray$1(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$1(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray$1(e,t):void 0}}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==_typeof$1(Symbol.iterator)?function(e){return _typeof$1(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof$1(e)},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _createClass(e,t,r){return t&&function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||_unsupportedIterableToArray(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=_typeof$1(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_typeof$1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_typeof$1(t)?t:String(t)}var t=_createClass((function TypesonPromise(e){_classCallCheck(this,TypesonPromise),this.p=new Promise(e)}));t.__typeson__type__="TypesonPromise","undefined"!=typeof Symbol&&Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function get(){return"TypesonPromise"}}),t.prototype.then=function(e,r){var n=this;return new t((function(t,o){n.p.then((function(r){t(e?e(r):r)})).catch((function(e){return r?r(e):Promise.reject(e)})).then(t,o)}))},t.prototype.catch=function(e){return this.then((function(){}),e)},t.resolve=function(e){return new t((function(t){t(e)}))},t.reject=function(e){return new t((function(t,r){r(e)}))},t.all=function(e){return new t((function(t,r){Promise.all(e.map((function(e){return null!=e&&e.constructor&&"__typeson__type__"in e.constructor&&"TypesonPromise"===e.constructor.__typeson__type__?e.p:e}))).then(t,r)}))},t.race=function(e){return new t((function(t,r){Promise.race(e.map((function(e){return null!=e&&e.constructor&&"__typeson__type__"in e.constructor&&"TypesonPromise"===e.constructor.__typeson__type__?e.p:e}))).then(t,r)}))},t.allSettled=function(e){return new t((function(t,r){Promise.allSettled(e.map((function(e){return null!=e&&e.constructor&&"__typeson__type__"in e.constructor&&"TypesonPromise"===e.constructor.__typeson__type__?e.p:e}))).then(t,r)}))};var r=Object.hasOwn,n=Object.getPrototypeOf;function isThenable(e,t){return isObject(e)&&"function"==typeof e.then&&(!t||"function"==typeof e.catch)}function toStringTag(e){return Object.prototype.toString.call(e).slice(8,-1)}function hasConstructorOf(e,t){if(!e||"object"!==_typeof(e))return!1;var o=n(e);if(!o)return null===t;var a=r(o,"constructor")&&o.constructor;return"function"!=typeof a?null===t:t===a||null!==t&&Function.prototype.toString.call(a)===Function.prototype.toString.call(t)||"function"==typeof t&&"string"==typeof a.__typeson__type__&&a.__typeson__type__===t.__typeson__type__}function isPlainObject(e){return!(!e||"Object"!==toStringTag(e))&&(!n(e)||hasConstructorOf(e,Object))}function isUserObject(e){if(!e||"Object"!==toStringTag(e))return!1;var t=n(e);return!t||hasConstructorOf(e,Object)||isUserObject(t)}function isObject(e){return null!==e&&"object"===_typeof(e)}function escapeKeyPathComponent(e){return e.replaceAll("''","''''").replace(/^$/,"''").replaceAll("~","~0").replaceAll(".","~1")}function unescapeKeyPathComponent(e){return e.replaceAll("~1",".").replaceAll("~0","~").replace(/^''$/,"").replaceAll("''''","''")}function getByKeyPath(e,t){if(""===t)return e;if(null===e||"object"!==_typeof(e))throw new TypeError("Unexpected non-object type");var r=t.indexOf(".");if(r>-1){var n=e[unescapeKeyPathComponent(t.slice(0,r))];return void 0===n?void 0:getByKeyPath(n,t.slice(r+1))}return e[unescapeKeyPathComponent(t)]}function setAtKeyPath(e,t,r){if(""===t)return r;if(!e||"object"!==_typeof(e))throw new TypeError("Unexpected non-object type");var n=t.indexOf(".");return n>-1?setAtKeyPath(e[unescapeKeyPathComponent(t.slice(0,n))],t.slice(n+1),r):(e[unescapeKeyPathComponent(t)]=r,e)}function getJSONType(e){return null===e?"null":Array.isArray(e)?"array":_typeof(e)}function _await(e,t,r){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}var o=Object.keys,a=Object.hasOwn,i=Array.isArray,c=["type","replaced","iterateIn","iterateUnsetNumeric","addLength"];function _async(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function nestedPathsFirst(e,t){var r,n;if(""===e.keypath)return-1;var o=null!==(r=e.keypath.match(/\./g))&&void 0!==r?r:0,a=null!==(n=t.keypath.match(/\./g))&&void 0!==n?n:0;return o&&(o=o.length),a&&(a=a.length),o>a?-1:o<a?1:e.keypath<t.keypath?-1:e.keypath>t.keypath?1:0}var u=function(){function Typeson(e){_classCallCheck(this,Typeson),this.options=e,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return _createClass(Typeson,[{key:"stringify",value:function stringify(e,t,r,n){n=_objectSpread2(_objectSpread2(_objectSpread2({},this.options),n),{},{stringification:!0});var o=this.encapsulate(e,null,n);return i(o)?JSON.stringify(o[0],t,r):o.then((function(e){return JSON.stringify(e,t,r)}))}},{key:"stringifySync",value:function stringifySync(e,t,r,n){return this.stringify(e,t,r,_objectSpread2(_objectSpread2({throwOnBadSyncType:!0},n),{},{sync:!0}))}},{key:"stringifyAsync",value:function stringifyAsync(e,t,r,n){return this.stringify(e,t,r,_objectSpread2(_objectSpread2({throwOnBadSyncType:!0},n),{},{sync:!1}))}},{key:"parse",value:function parse(e,t,r){return r=_objectSpread2(_objectSpread2(_objectSpread2({},this.options),r),{},{parse:!0}),this.revive(JSON.parse(e,t),r)}},{key:"parseSync",value:function parseSync(e,t,r){return this.parse(e,t,_objectSpread2(_objectSpread2({throwOnBadSyncType:!0},r),{},{sync:!0}))}},{key:"parseAsync",value:function parseAsync(e,t,r){return this.parse(e,t,_objectSpread2(_objectSpread2({throwOnBadSyncType:!0},r),{},{sync:!1}))}},{key:"specialTypeNames",value:function specialTypeNames(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.returnTypeNames=!0,this.encapsulate(e,t,r)}},{key:"rootTypeName",value:function rootTypeName(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.iterateNone=!0,this.encapsulate(e,t,r)}},{key:"encapsulate",value:function encapsulate(e,r,n){var u=this,s=_objectSpread2(_objectSpread2({sync:!0},this.options),n),f=s.sync,l={},y=[],p=[],v=[],d=!("cyclic"in s)||s.cyclic,h=s.encapsulateObserver,m=function finish(e){var t=Object.values(l);if(s.iterateNone)return t.length?t[0]:getJSONType(e);if(t.length){if(s.returnTypeNames)return function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(t));e&&isPlainObject(e)&&!a(e,"$types")?e.$types=l:e={$:e,$types:{$:l}}}else isObject(e)&&a(e,"$types")&&(e={$:e,$types:!0});return!s.returnTypeNames&&e},b=_async((function(e,r){return _await(Promise.all(r.map((function(e){return e[1].p}))),(function(n){return _await(Promise.all(n.map(_async((function(n){var o=!1,a=[],i=_slicedToArray(r.splice(0,1),1),c=_slicedToArray(i[0],7),u=c[0],s=c[2],f=c[3],l=c[4],y=c[5],p=c[6],v=_(u,n,s,f,a,!0,p),d=hasConstructorOf(v,t);return function _invoke(e,t){var r=e();return r&&r.then?r.then(t):t(r)}((function(){if(u&&d)return _await(v.p,(function(t){l[y]=t;var r=b(e,a);return o=!0,r}))}),(function(t){return o?t:(u?l[y]=v:e=d?v.p:v,b(e,a))}))})))),(function(){return e}))}))})),g=function _adaptBuiltinStateObjectProperties(e,t,r){Object.assign(e,t);var n=c.map((function(t){var r=e[t];return delete e[t],r}));r(),c.forEach((function(t,r){e[t]=n[r]}))},_=function _encapsulate(e,r,n,c,f,v,d){var m,b={},_=_typeof(r),O=h?function(o){var a,i=null!==(a=null!=d?d:c.type)&&void 0!==a?a:getJSONType(r);h(Object.assign(null!=o?o:b,{keypath:e,value:r,cyclic:n,stateObj:c,promisesData:f,resolvingTypesonPromise:v,awaitingTypesonPromise:hasConstructorOf(r,t)},{type:i}))}:null;if(["string","boolean","number","undefined"].includes(_))return void 0===r||Number.isNaN(r)||r===Number.NEGATIVE_INFINITY||r===Number.POSITIVE_INFINITY||0===r?(m=c.replaced?r:w(e,r,c,f,!1,v,O))!==r&&(b={replaced:m}):m=r,O&&O(),m;if(null===r)return O&&O(),r;if(n&&!c.iterateIn&&!c.iterateUnsetNumeric&&r&&"object"===_typeof(r)){var A=y.indexOf(r);if(!(A<0))return l[e]="#",O&&O({cyclicKeypath:p[A]}),"#"+p[A];!0===n&&(y.push(r),p.push(e))}var S,j,T=isPlainObject(r),x=i(r),P=(T||x)&&(!u.plainObjectReplacers.length||c.replaced)||c.iterateIn?r:w(e,r,c,f,T||x,null,O);if(P!==r?(m=P,b={replaced:P}):""===e&&hasConstructorOf(r,t)?(f.push([e,r,n,c,void 0,void 0,c.type]),m=r):x&&"object"!==c.iterateIn||"array"===c.iterateIn?(S=new Array(r.length),b={clone:S}):(["function","symbol"].includes(_typeof(r))||"toJSON"in r||hasConstructorOf(r,t)||hasConstructorOf(r,Promise)||hasConstructorOf(r,ArrayBuffer))&&!T&&"object"!==c.iterateIn?m=r:(S={},c.addLength&&(S.length=r.length),b={clone:S}),O&&O(),s.iterateNone)return null!==(j=S)&&void 0!==j?j:m;if(!S)return m;if(c.iterateIn){var I=function _loop(o){var i={ownKeys:a(r,o)};g(c,i,(function(){var a=e+(e?".":"")+escapeKeyPathComponent(o),i=_encapsulate(a,r[o],Boolean(n),c,f,v);hasConstructorOf(i,t)?f.push([a,i,Boolean(n),c,S,o,c.type]):void 0!==i&&(S[o]=i)}))};for(var E in r)I(E);O&&O({endIterateIn:!0,end:!0})}else o(r).forEach((function(o){var a=e+(e?".":"")+escapeKeyPathComponent(o);g(c,{ownKeys:!0},(function(){var e=_encapsulate(a,r[o],Boolean(n),c,f,v);hasConstructorOf(e,t)?f.push([a,e,Boolean(n),c,S,o,c.type]):void 0!==e&&(S[o]=e)}))})),O&&O({endIterateOwn:!0,end:!0});if(c.iterateUnsetNumeric){for(var N=r.length,k=function _loop2(o){if(!(o in r)){var a="".concat(e).concat(e?".":"").concat(o);g(c,{ownKeys:!1},(function(){var e=_encapsulate(a,void 0,Boolean(n),c,f,v);hasConstructorOf(e,t)?f.push([a,e,Boolean(n),c,S,o,c.type]):void 0!==e&&(S[o]=e)}))}},C=0;C<N;C++)k(C);O&&O({endIterateUnsetNumeric:!0,end:!0})}return S},w=function replace(e,t,r,n,o,a,i){for(var c=o?u.plainObjectReplacers:u.nonplainObjectReplacers,s=c.length;s--;){var y=c[s];if(y.test(t,r)){var p=y.type;if(u.revivers[p]){var v=l[e];l[e]=v?[p].concat(v):p}if(Object.assign(r,{type:p,replaced:!0}),(f||!y.replaceAsync)&&!y.replace)return i&&i({typeDetected:!0}),_(e,t,d&&"readonly",r,n,a,p);i&&i({replacing:!0});var h=void 0;if(f||!y.replaceAsync){if(void 0===y.replace)throw new TypeError("Missing replacer");h=y.replace(t,r)}else h=y.replaceAsync(t,r);return _(e,h,d&&"readonly",r,n,a,p)}}return t},O=_("",e,d,null!=r?r:{},v);if(v.length)return f&&s.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(b(O,v)).then(m);if(!f&&s.throwOnBadSyncType)throw new TypeError("Async method requested but sync result obtained");return s.stringification&&f?[m(O)]:f?m(O):Promise.resolve(m(O))}},{key:"encapsulateSync",value:function encapsulateSync(e,t,r){return this.encapsulate(e,t,_objectSpread2(_objectSpread2({throwOnBadSyncType:!0},r),{},{sync:!0}))}},{key:"encapsulateAsync",value:function encapsulateAsync(e,t,r){return this.encapsulate(e,t,_objectSpread2(_objectSpread2({throwOnBadSyncType:!0},r),{},{sync:!1}))}},{key:"revive",value:function revive(e,r){var n=this,a=_objectSpread2(_objectSpread2({sync:!0},this.options),r),c=a.sync;function finishRevival(e){if(c)return e;if(a.throwOnBadSyncType)throw new TypeError("Async method requested but sync result obtained");return Promise.resolve(e)}if(!e||"object"!==_typeof(e)||Array.isArray(e))return finishRevival(e);var u=e.$types;if(!0===u)return finishRevival(e.$);if(!u||"object"!==_typeof(u)||Array.isArray(u))return finishRevival(e);var f=[],l={},y=!0;u.$&&isPlainObject(u.$)&&(e=e.$,u=u.$,y=!1);var p=function executeReviver(e,t){var r,o=_slicedToArray(null!==(r=n.revivers[e])&&void 0!==r?r:[],1)[0];if(!o)throw new Error("Unregistered type: "+e);if(c&&!("revive"in o))return t;if(!c&&o.reviveAsync)return o.reviveAsync(t,l);if(o.revive)return o.revive(t,l);throw new Error("Missing reviver")},v=[];function checkUndefined(e){return hasConstructorOf(e,s)?void 0:e}var d,h=function revivePlainObjects(){var r=[];if(!u)throw new Error("Found bad `types`");if(Object.entries(u).forEach((function(e){var t=_slicedToArray(e,2),o=t[0],a=t[1];"#"!==a&&[].concat(a).forEach((function(e){var t;_slicedToArray(null!==(t=n.revivers[e])&&void 0!==t?t:[null,{}],2)[1].plain&&(r.push({keypath:o,type:e}),delete u[o])}))})),r.length)return r.sort(nestedPathsFirst).reduce((function reducer(r,n){var o=n.keypath,a=n.type;if(isThenable(r))return r.then((function(e){return reducer(e,{keypath:o,type:a})}));var i=getByKeyPath(e,o);if(hasConstructorOf(i=p(a,i),t))return i.then((function(t){var r=setAtKeyPath(e,o,t);r===t&&(e=r)}));var c=setAtKeyPath(e,o,i);c===i&&(e=c)}),void 0)}();return hasConstructorOf(h,t)?d=h.then((function(){return e})):(d=function _revive(e,r,n,a,c){if(!y||"$types"!==e){var l=u[e],d=i(r);if(d||isPlainObject(r)){var h=d?new Array(r.length):{};for(o(r).forEach((function(o){var a=_revive(e+(e?".":"")+escapeKeyPathComponent(o),r[o],null!=n?n:h,h,o),i=function set(e){return hasConstructorOf(e,s)?h[o]=void 0:void 0!==e&&(h[o]=e),e};hasConstructorOf(a,t)?v.push(a.then((function(e){return i(e)}))):i(a)})),r=h;f.length;){var m=_slicedToArray(f[0],4),b=m[0],g=m[1],_=m[2],w=m[3],O=getByKeyPath(b,g);if(void 0===O)break;_[w]=O,f.splice(0,1)}}if(!l)return r;if("#"===l){var A=getByKeyPath(n,r.slice(1));return void 0===A&&f.push([n,r.slice(1),a,c]),A}return[].concat(l).reduce((function reducer(e,r){if(hasConstructorOf(e,t))return e.then((function(e){return reducer(e,r)}));if("string"!=typeof r)throw new TypeError("Bad type JSON");return p(r,e)}),r)}}("",e,null),v.length&&(d=t.resolve(d).then((function(e){return t.all([e].concat(v))})).then((function(e){return _slicedToArray(e,1)[0]})))),isThenable(d)?c&&a.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():hasConstructorOf(d,t)?d.p.then(checkUndefined):d:!c&&a.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():c?checkUndefined(d):Promise.resolve(checkUndefined(d))}},{key:"reviveSync",value:function reviveSync(e,t){return this.revive(e,_objectSpread2(_objectSpread2({throwOnBadSyncType:!0},t),{},{sync:!0}))}},{key:"reviveAsync",value:function reviveAsync(e,t){return this.revive(e,_objectSpread2(_objectSpread2({throwOnBadSyncType:!0},t),{},{sync:!1}))}},{key:"register",value:function register(e,t){var r=this,n=null!=t?t:{},a=function R(e){i(e)?e.forEach((function(e){return R(e)})):o(e).forEach((function(t){var o;if("#"===t)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(f.includes(t))throw new TypeError("Plain JSON object types are reserved as type names");var a=e[t],c=a&&"function"!=typeof a&&!Array.isArray(a)&&a.testPlainObjects?r.plainObjectReplacers:r.nonplainObjectReplacers,u=c.filter((function(e){return e.type===t}));if(u.length&&(c.splice(c.indexOf(u[0]),1),delete r.revivers[t],delete r.types[t]),"function"==typeof a){var s=a;a={test:function test(e){return e&&e.constructor===s},replace:function replace(e){return _objectSpread2({},e)},revive:function revive(e){return Object.assign(Object.create(s.prototype),e)}}}else if(i(a)){var l=_slicedToArray(a,3);a={test:l[0],replace:l[1],revive:l[2]}}if(null!==(o=a)&&void 0!==o&&o.test){var y={type:t,test:a.test.bind(a)};a.replace&&(y.replace=a.replace.bind(a)),a.replaceAsync&&(y.replaceAsync=a.replaceAsync.bind(a));var p="number"==typeof n.fallback?n.fallback:n.fallback?0:Number.POSITIVE_INFINITY;if(a.testPlainObjects?r.plainObjectReplacers.splice(p,0,y):r.nonplainObjectReplacers.splice(p,0,y),a.revive||a.reviveAsync){var v={};a.revive&&(v.revive=a.revive.bind(a)),a.reviveAsync&&(v.reviveAsync=a.reviveAsync.bind(a)),r.revivers[t]=[v,{plain:a.testPlainObjects}]}r.types[t]=a}}))};return[].concat(e).forEach((function(e){return a(e)})),this}}]),Typeson}(),s=_createClass((function Undefined(){_classCallCheck(this,Undefined)}));s.__typeson__type__="TypesonUndefined";for(var f=["null","boolean","number","string","array","object"],l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=new Uint8Array(256),p=0;p<64;p++)y[l.codePointAt(p)]=p;var v=function encode(e,t,r){null==r&&(r=e.byteLength);for(var n=new Uint8Array(e,0,r),o=n.length,a="",i=0;i<o;i+=3)a+=l[n[i]>>2],a+=l[(3&n[i])<<4|n[i+1]>>4],a+=l[(15&n[i+1])<<2|n[i+2]>>6],a+=l[63&n[i+2]];return o%3==2?a=a.slice(0,-1)+"=":o%3==1&&(a=a.slice(0,-2)+"=="),a},d=function decode(e,t){var r=e.length;if(r%4)throw new Error("Bad base64 length: not divisible by four");var n,o,a,i,c=.75*e.length,u=0;"="===e[e.length-1]&&(c--,"="===e[e.length-2]&&c--);for(var s=new ArrayBuffer(c,t),f=new Uint8Array(s),l=0;l<r;l+=4)n=y[e.codePointAt(l)],o=y[e.codePointAt(l+1)],a=y[e.codePointAt(l+2)],i=y[e.codePointAt(l+3)],f[u++]=n<<2|o>>4,f[u++]=(15&o)<<4|a>>2,f[u++]=(3&a)<<6|63&i;return s},h={arraybuffer:{test:function test(e){return"ArrayBuffer"===toStringTag(e)},replace:function replace(e,t){t.buffers||(t.buffers=[]);var r=t.buffers.indexOf(e);return r>-1?{index:r}:(t.buffers.push(e),{s:v(e),maxByteLength:e.maxByteLength,resizable:e.resizable})},revive:function revive(e,t){if(t.buffers||(t.buffers=[]),Object.hasOwn(e,"index"))return t.buffers[e.index];var r=d(e.s,e.resizable?{maxByteLength:e.maxByteLength}:void 0);return t.buffers.push(r),r}}},m={bigintObject:{test:function test(e){return"object"===_typeof$1(e)&&hasConstructorOf(e,BigInt)},replace:String,revive:function revive(e){return new Object(BigInt(e))}}},b={bigint:{test:function test(e){return"bigint"==typeof e},replace:String,revive:function revive(e){return BigInt(e)}}};function arraybuffer2string(e){return new Uint8Array(e).reduce((function(e,t){return e+String.fromCodePoint(t)}),"")}function string2arraybuffer(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t.buffer}var g={blob:{test:function test(e){return"Blob"===toStringTag(e)},replace:function replace(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),200!==t.status&&0!==t.status)throw new Error("Bad Blob access: "+t.status);return{type:e.type,stringContents:t.responseText}},revive:function revive(e){var t=e.type,r=e.stringContents;return new Blob([string2arraybuffer(r)],{type:t})},replaceAsync:function replaceAsync(e){return new t((function(t,r){var n=new FileReader;n.addEventListener("load",(function(){t({type:e.type,stringContents:arraybuffer2string(n.result)})})),n.addEventListener("error",(function(){r(n.error)})),n.readAsArrayBuffer(e)}))}}};function generateUUID(){var e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replaceAll(/[xy]/g,(function(t){var r=Math.trunc((e+16*Math.random())%16);return e=Math.floor(e/16),("x"===t?r:3&r|8).toString(16)}))}var _={},w={cloneable:{test:function test(e){return e&&"object"===_typeof$1(e)&&"function"==typeof e[Symbol.for("cloneEncapsulate")]},replace:function replace(e){var t=e[Symbol.for("cloneEncapsulate")](),r=generateUUID();return _[r]=e,{uuid:r,encapsulated:t}},revive:function revive(e){var t=e.uuid,r=e.encapsulated;return _[t][Symbol.for("cloneRevive")](r)}}},O={cryptokey:{test:function test(e){return"CryptoKey"===toStringTag(e)&&e.extractable},replaceAsync:function replaceAsync(e){return new t(function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t,r){var n;return _regeneratorRuntime().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,crypto.subtle.exportKey("jwk",e);case 3:n=o.sent,o.next=10;break;case 6:return o.prev=6,o.t0=o.catch(0),r(o.t0),o.abrupt("return");case 10:t({jwk:n,algorithm:e.algorithm,usages:e.usages});case 11:case"end":return o.stop()}}),_callee,null,[[0,6]])})));return function(e,r){return t.apply(this,arguments)}}())},revive:function revive(e){var t=e.jwk,r=e.algorithm,n=e.usages;return crypto.subtle.importKey("jwk",t,r,!0,n)}}},A={dataview:{test:function test(e){return"DataView"===toStringTag(e)},replace:function replace(e,t){var r=e.buffer,n=e.byteOffset,o=e.byteLength;t.buffers||(t.buffers=[]);var a=t.buffers.indexOf(r);return a>-1?{index:a,byteOffset:n,byteLength:o}:(t.buffers.push(r),{encoded:v(r),maxByteLength:r.maxByteLength,resizable:r.resizable,byteOffset:n,byteLength:o})},revive:function revive(e,t){t.buffers||(t.buffers=[]);var r,n=e.byteOffset,o=e.byteLength,a=e.encoded,i=e.index,c=e.maxByteLength,u=e.resizable;return"index"in e?r=t.buffers[i]:(r=d(a,u?{maxByteLength:c}:c),t.buffers.push(r)),new DataView(r,n,o)}}},S={date:{test:function test(e){return"Date"===toStringTag(e)},replace:function replace(e){var t=e.getTime();return Number.isNaN(t)?"NaN":t},revive:function revive(e){return"NaN"===e?new Date(Number.NaN):new Date(e)}}},j={domexception:{test:function test(e){return"DOMException"===toStringTag(e)},replace:function replace(e){return{name:e.name,message:e.message}},revive:function revive(e){var t=e.message,r=e.name;return new DOMException(t,r)}}},T={};function create$5(e){T[e.name.toLowerCase()]={test:function test(t){return toStringTag(t)===e.name},replace:function replace(e){return e.is2D?{a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}:{m11:e.m11,m12:e.m12,m13:e.m13,m14:e.m14,m21:e.m21,m22:e.m22,m23:e.m23,m24:e.m24,m31:e.m31,m32:e.m32,m33:e.m33,m34:e.m34,m41:e.m41,m42:e.m42,m43:e.m43,m44:e.m44}},revive:function revive(t){return Object.hasOwn(t,"a")?new e([t.a,t.b,t.c,t.d,t.e,t.f]):new e([t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44])}}}"undefined"!=typeof DOMMatrix&&create$5(DOMMatrix),"undefined"!=typeof DOMMatrixReadOnly&&create$5(DOMMatrixReadOnly);var x={};function create$4(e){x[e.name.toLowerCase()]={test:function test(t){return toStringTag(t)===e.name},replace:function replace(e){return{x:e.x,y:e.y,z:e.z,w:e.w}},revive:function revive(t){var r=t.x,n=t.y,o=t.z,a=t.w;return new e(r,n,o,a)}}}"undefined"!=typeof DOMPoint&&create$4(DOMPoint),"undefined"!=typeof DOMPointReadOnly&&create$4(DOMPointReadOnly);var P={domquad:{test:function test(e){return"DOMQuad"===toStringTag(e)},replace:function replace(e){return{p1:e.p1,p2:e.p2,p3:e.p3,p4:e.p4}},revive:function revive(e){var t=e.p1,r=e.p2,n=e.p3,o=e.p4;return new DOMQuad(t,r,n,o)}}},I={};function create$3(e){I[e.name.toLowerCase()]={test:function test(t){return toStringTag(t)===e.name},replace:function replace(e){return{x:e.x,y:e.y,width:e.width,height:e.height}},revive:function revive(t){var r=t.x,n=t.y,o=t.width,a=t.height;return new e(r,n,o,a)}}}"undefined"!=typeof DOMRect&&create$3(DOMRect),"undefined"!=typeof DOMRectReadOnly&&create$3(DOMRectReadOnly);var E={error:{test:function test(e){return"Error"===toStringTag(e)},replace:function replace(e){return{name:e.name,message:e.message,cause:e.cause,stack:e.stack,fileName:e.fileName,lineNumber:e.lineNumber,columnNumber:e.columnNumber}},revive:function revive(e){var t=new Error(e.message);return t.name=e.name,t.cause=e.cause,t.stack=e.stack,t.fileName=e.fileName,t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}}},N={};function create$2(e){N[e.name.toLowerCase()]={test:function test(t){return hasConstructorOf(t,e)},replace:function replace(e){return{name:e.name,message:e.message,cause:e.cause,stack:e.stack,fileName:e.fileName,lineNumber:e.lineNumber,columnNumber:e.columnNumber,errors:e.errors}},revive:function revive(t){var r="undefined"!=typeof AggregateError&&e===AggregateError?new e(t.errors,t.message):new e(t.message);return r.name=t.name,r.cause=t.cause,r.stack=t.stack,r.fileName=t.fileName,r.lineNumber=t.lineNumber,r.columnNumber=t.columnNumber,r}}}[TypeError,RangeError,SyntaxError,ReferenceError,EvalError,URIError].forEach((function(e){return create$2(e)})),"undefined"!=typeof AggregateError&&create$2(AggregateError),"function"==typeof InternalError&&create$2(InternalError);var k={file:{test:function test(e){return"File"===toStringTag(e)},replace:function replace(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),200!==t.status&&0!==t.status)throw new Error("Bad File access: "+t.status);return{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:function revive(e){var t=e.name,r=e.type,n=e.stringContents,o=e.lastModified;return new File([string2arraybuffer(n)],t,{type:r,lastModified:o})},replaceAsync:function replaceAsync(e){return new t((function(t,r){var n=new FileReader;n.addEventListener("load",(function(){t({type:e.type,stringContents:arraybuffer2string(n.result),name:e.name,lastModified:e.lastModified})})),n.addEventListener("error",(function(){r(n.error)})),n.readAsArrayBuffer(e)}))}}},C={file:k.file,filelist:{test:function test(e){return"FileList"===toStringTag(e)},replace:function replace(e){for(var t=[],r=0;r<e.length;r++)t[r]=e.item(r);return t},revive:function revive(e){var t=function(){return _createClass$1((function FileList(){!function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FileList),this._files=arguments[0],this.length=this._files.length}),[{key:"item",value:function item(e){return this._files[e]}},{key:Symbol.toStringTag,get:function get(){return"FileList"}}])}();return new t(e)}}},L={imagebitmap:{test:function test(e){return"ImageBitmap"===toStringTag(e)||e&&e.dataset&&"ImageBitmap"===e.dataset.toStringTag},replace:function replace(e){var t=document.createElement("canvas");return t.getContext("2d").drawImage(e,0,0),{width:e.width,height:e.height,dataURL:t.toDataURL()}},revive:function revive(e){var t="undefined"==typeof OffscreenCanvas?document.createElement("canvas"):new OffscreenCanvas(e.width,e.height),r=t.getContext("2d"),n=document.createElement("img");return n.addEventListener("load",(function(){r.drawImage(n,0,0)})),n.src=e.dataURL,"undefined"==typeof OffscreenCanvas?t:t.transferToImageBitmap()},reviveAsync:function reviveAsync(e){var r=document.createElement("canvas"),n=r.getContext("2d"),o=document.createElement("img");return o.addEventListener("load",(function(){n.drawImage(o,0,0)})),o.src=e.dataURL,new t(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(e,t){var n;return _regeneratorRuntime().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,createImageBitmap(r);case 3:n=o.sent,e(n),o.next=10;break;case 7:o.prev=7,o.t0=o.catch(0),t(o.t0);case 10:case"end":return o.stop()}}),_callee,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}())}}},$={imagedata:{test:function test(e){return"ImageData"===toStringTag(e)},replace:function replace(e){return{array:_toConsumableArray$1(e.data),width:e.width,height:e.height}},revive:function revive(e){return new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}}},B={infinity:{test:function test(e){return e===Number.POSITIVE_INFINITY},replace:function replace(){return"Infinity"},revive:function revive(){return Number.POSITIVE_INFINITY}}},M={test:function test(e){return hasConstructorOf(e,Intl.Collator)},replace:function replace(e){return e.resolvedOptions()},revive:function revive(e){return new Intl.Collator(e.locale,e)}},U={IntlCollator:M,IntlDateTimeFormat:{test:function test(e){return hasConstructorOf(e,Intl.DateTimeFormat)},replace:function replace(e){return e.resolvedOptions()},revive:function revive(e){return new Intl.DateTimeFormat(e.locale,e)}},IntlNumberFormat:{test:function test(e){return hasConstructorOf(e,Intl.NumberFormat)},replace:function replace(e){return e.resolvedOptions()},revive:function revive(e){return new Intl.NumberFormat(e.locale,e)}}},D={map:{test:function test(e){return"Map"===toStringTag(e)},replace:function replace(e){return _toConsumableArray$1(e.entries())},revive:function revive(e){return new Map(e)}}},F={nan:{test:function test(e){return Number.isNaN(e)},replace:function replace(){return"NaN"},revive:function revive(){return Number.NaN}}},K={negativeInfinity:{test:function test(e){return e===Number.NEGATIVE_INFINITY},replace:function replace(){return"-Infinity"},revive:function revive(){return Number.NEGATIVE_INFINITY}}},G={negativeZero:{test:function test(e){return Object.is(e,-0)},replace:function replace(){return 0},revive:function revive(){return-0}}},J={nonbuiltinIgnore:{test:function test(e){return e&&"object"===_typeof$1(e)&&!Array.isArray(e)&&!["Object","Boolean","Number","String","Error","RegExp","Math","Date","Map","Set","JSON","ArrayBuffer","SharedArrayBuffer","DataView","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","Promise","String Iterator","Array Iterator","Map Iterator","Set Iterator","WeakMap","WeakSet","Atomics","Module"].includes(toStringTag(e))},replace:function replace(){}}},z={StringObject:{test:function test(e){return"String"===toStringTag(e)&&"object"===_typeof$1(e)},replace:String,revive:function revive(e){return new String(e)}},BooleanObject:{test:function test(e){return"Boolean"===toStringTag(e)&&"object"===_typeof$1(e)},replace:function replace(e){return e.valueOf()},revive:function revive(e){return new Boolean(e)}},NumberObject:{test:function test(e){return"Number"===toStringTag(e)&&"object"===_typeof$1(e)},replace:Number,revive:function revive(e){return new Number(e)}}},V={promise:{test:function test(e){return"Promise"===toStringTag(e)},replaceAsync:function replaceAsync(e){return new t(function(){var t=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(t){return _regeneratorRuntime().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.t0=t,r.next=4,e;case 4:r.t1=r.sent,r.t2={value:r.t1},(0,r.t0)(r.t2),r.next=12;break;case 9:r.prev=9,r.t3=r.catch(0),t({error:r.t3});case 12:case"end":return r.stop()}}),_callee,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}())},revive:function revive(e){return e.error?Promise.reject(e.error):Promise.resolve(e.value)}}},W={regexp:{test:function test(e){return"RegExp"===toStringTag(e)},replace:function replace(e){return{source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")}},revive:function revive(e){var t=e.source,r=e.flags;return new RegExp(t,r)}}},Y={},q={resurrectable:{test:function test(e){return e&&!Array.isArray(e)&&["object","function","symbol"].includes(_typeof$1(e))},replace:function replace(e){var t=generateUUID();return Y[t]=e,t},revive:function revive(e){return Y[e]}}},H={set:{test:function test(e){return"Set"===toStringTag(e)},replace:function replace(e){return _toConsumableArray$1(e.values())},revive:function revive(e){return new Set(e)}}},Q={symbol:{test:function test(e){return"symbol"===_typeof$1(e)},replace:function replace(e){return{global:void 0!==Symbol.keyFor(e),sym:String(e).slice(7,-1)}},revive:function revive(e){return e.global?Symbol.for(e.sym):Symbol(e.sym)}}},X={};"function"==typeof Int8Array&&[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].concat(_toConsumableArray$1("function"==typeof BigInt64Array?[BigInt64Array,BigUint64Array]:[])).forEach((function(e){return function create$1(e){var t=e.name;X[t.toLowerCase()]={test:function test(e){return toStringTag(e)===t},replace:function replace(e){return(0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e:e.slice(0)).buffer},revive:function revive(t){return"ArrayBuffer"===toStringTag(t)?new e(t):t}}}(e)}));var Z={};"function"==typeof Int8Array&&[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].concat(_toConsumableArray$1("function"==typeof BigInt64Array?[BigInt64Array,BigUint64Array]:[])).forEach((function(e){return function create(e){var t=e.name;Z[t.toLowerCase()]={test:function test(e){return toStringTag(e)===t},replace:function replace(e,t){var r=e.buffer,n=e.byteOffset,o=e.length;t.buffers||(t.buffers=[]);var a=t.buffers.indexOf(r);return a>-1?{index:a,byteOffset:n,length:o}:(t.buffers.push(r),{maxByteLength:r.maxByteLength,resizable:r.resizable,encoded:v(r),byteOffset:n,length:o})},revive:function revive(t,r){r.buffers||(r.buffers=[]);var n,o=t.byteOffset,a=t.length,i=t.encoded,c=t.index,u=t.maxByteLength,s=t.resizable;return"index"in t?n=r.buffers[c]:(n=d(i,s?{maxByteLength:u}:void 0),r.buffers.push(n)),new e(n,o,a)}}}(e)}));var ee={undef:{test:function test(e,t){return void 0===e&&(t.ownKeys||!("ownKeys"in t))},replace:function replace(){return 0},revive:function revive(){return new s}}},te={userObject:{test:function test(e){return isUserObject(e)},replace:function replace(e){return function _objectSpread2$1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(r),!0).forEach((function(t){_defineProperty$1(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)},revive:function revive(e){return e}}},re=[{arrayNonindexKeys:{testPlainObjects:!0,test:function test(e,t){return!!Array.isArray(e)&&(Object.keys(e).some((function(e){return String(Number.parseInt(e))!==e}))&&(t.iterateIn="object",t.addLength=!0),!0)},replace:function replace(e,t){return t.iterateUnsetNumeric=!0,e},revive:function revive(e){if(Array.isArray(e))return e;var t=[];return Object.entries(e).forEach((function(e){var r=_slicedToArray$1(e,2),n=r[0],o=r[1];t[n]=o})),t}}},{sparseUndefined:{test:function test(e,t){return void 0===e&&!1===t.ownKeys},replace:function replace(){return 0},revive:function revive(){}}}],ne=[F,B,K,G],oe=[ee,re,z,ne,S,E,N,W].concat("function"==typeof Map?D:[],"function"==typeof Set?H:[],"function"==typeof ArrayBuffer?h:[],"function"==typeof Uint8Array?Z:[],"function"==typeof DataView?A:[],"undefined"!=typeof Intl?U:[],"undefined"!=typeof BigInt?[b,m]:[]),ae=[E,N],ie=[oe,{arraybuffer:null},X],ce=[{sparseArrays:{testPlainObjects:!0,test:function test(e){return Array.isArray(e)},replace:function replace(e,t){return t.iterateUnsetNumeric=!0,e}}},{sparseUndefined:{test:function test(e,t){return void 0===e&&!1===t.ownKeys},replace:function replace(){return 0},revive:function revive(){}}}],ue=[te,ee,re,z,ne,S,W,$,L,k,C,g,E,N].concat("function"==typeof Map?D:[],"function"==typeof Set?H:[],"function"==typeof ArrayBuffer?h:[],"function"==typeof Uint8Array?Z:[],"function"==typeof DataView?A:[],"undefined"!=typeof crypto?O:[],"undefined"!=typeof BigInt?[b,m]:[],"undefined"!=typeof DOMException?j:[],"undefined"!=typeof DOMRect?I:[],"undefined"!=typeof DOMPoint?x:[],"undefined"!=typeof DOMQuad?P:[],"undefined"!=typeof DOMMatrix?T:[]),se=ue.concat({checkDataCloneException:{test:function test(e){var t={}.toString.call(e).slice(8,-1);if(["symbol","function"].includes(_typeof$1(e))||["Arguments","Module","Promise","WeakMap","WeakSet","Event","MessageChannel"].includes(t)||e&&"object"===_typeof$1(e)&&"number"==typeof e.nodeType&&"function"==typeof e.insertBefore)throw new DOMException("The object cannot be cloned.","DataCloneError");return!1}}}),fe=[ce,ee],le=[oe];e.JSON_TYPES=f,e.Typeson=u,e.TypesonPromise=t,e.Undefined=s,e.arrayNonindexKeys=re,e.arraybuffer=h,e.bigint=b,e.bigintObject=m,e.blob=g,e.builtin=oe,e.cloneable=w,e.cryptokey=O,e.dataview=A,e.date=S,e.domexception=j,e.dommatrix=T,e.dompoint=x,e.domquad=P,e.domrect=I,e.error=E,e.errors=N,e.escapeKeyPathComponent=escapeKeyPathComponent,e.file=k,e.filelist=C,e.getByKeyPath=getByKeyPath,e.getJSONType=getJSONType,e.hasConstructorOf=hasConstructorOf,e.imagebitmap=L,e.imagedata=$,e.infinity=B,e.intlTypes=U,e.isObject=isObject,e.isPlainObject=isPlainObject,e.isThenable=isThenable,e.isUserObject=isUserObject,e.map=D,e.nan=F,e.negativeInfinity=K,e.negativeZero=G,e.nonbuiltinIgnore=J,e.postmessage=ae,e.primitiveObjects=z,e.promise=V,e.regexp=W,e.resurrectable=q,e.set=H,e.setAtKeyPath=setAtKeyPath,e.socketio=ie,e.sparseUndefined=ce,e.specialNumbers=ne,e.structuredCloning=ue,e.structuredCloningThrowing=se,e.symbol=Q,e.toStringTag=toStringTag,e.typedArrays=Z,e.typedArraysSocketio=X,e.undef=ee,e.undefPreset=fe,e.unescapeKeyPathComponent=unescapeKeyPathComponent,e.universal=le,e.userObject=te}));
//# sourceMappingURL=index.umd.min.cjs.map
